# 📖 使用说明

> Hospital Medical System — User Guide

本文档详细介绍医院病历管理系统的使用方法，覆盖所有功能模块的操作步骤和界面说明。

---

## 目录

- [1. 登录系统](#1-登录系统)
- [2. 主界面布局](#2-主界面布局)
- [3. 仪表板](#3-仪表板)
- [4. 患者管理](#4-患者管理)
- [5. 医生管理](#5-医生管理)
- [6. 病历管理](#6-病历管理)
- [7. 科室管理](#7-科室管理)
- [8. 统计分析](#8-统计分析)
- [9. 系统管理](#9-系统管理)
- [10. 通用操作](#10-通用操作)

---

## 1. 登录系统

### 1.1 访问登录页

打开浏览器，访问系统地址 `http://localhost:5173`（开发环境）。
未登录用户将自动跳转到登录页面。

### 1.2 登录操作

1. 输入**用户名**（如 `admin`）
2. 输入**密码**（如 `admin123`）
3. 点击**登录**按钮
4. 登录成功后自动跳转到仪表板页面

### 1.3 测试账户

| 角色 | 用户名 | 密码 | 权限范围 |
|------|--------|------|---------|
| 管理员 | `admin` | `admin123` | 全部功能 |
| 医生 | `doctor1` | `doctor1123` | 业务模块（无系统管理） |
| 护士 | `nurse1` | `nurse1123` | 业务模块（无系统管理） |
| 前台 | `reception1` | `reception1123` | 业务模块（无系统管理） |

### 1.4 登出

点击右上角的用户头像/用户名，选择**退出登录**。系统将清除登录状态并返回登录页。

---

## 2. 主界面布局

登录成功后进入主界面，界面由三部分组成：

```
┌──────────────────────────────────────────────────────┐
│                    顶部栏 (Header)                     │
│  [折叠按钮]  [面包屑导航]          [语言切换] [用户菜单] │
├──────────┬───────────────────────────────────────────┤
│          │                                           │
│  侧边栏   │              内容区域                      │
│  (Sidebar)│            (Content)                     │
│          │                                           │
│  🏠 仪表板 │  ┌─────────────────────────────────────┐  │
│  👥 患者   │  │                                     │  │
│  👨‍⚕️ 医生  │  │      路由页面动态渲染                 │  │
│  📋 病历   │  │                                     │  │
│  🏢 科室   │  │                                     │  │
│  📊 统计   │  └─────────────────────────────────────┘  │
│  ⚙️ 系统*  │                                           │
│          │                                           │
└──────────┴───────────────────────────────────────────┘
            * 仅管理员可见
```

### 2.1 侧边栏

- 显示所有可用的功能模块图标和名称
- 点击模块名称跳转到对应页面
- 支持**折叠/展开**（点击顶部折叠按钮或侧边栏上方的折叠图标）
- **系统管理**仅对管理员角色可见

### 2.2 顶部栏

- **面包屑导航**: 显示当前页面路径
- **语言切换**: 中文/英文切换按钮，即时生效
- **用户菜单**: 显示当前用户名和角色，提供退出登录选项

### 2.3 语言切换

1. 点击顶部栏右侧的语言切换按钮
2. 选择 **中文** 或 **English**
3. 界面文案即时切换，刷新后仍保持选择

---

## 3. 仪表板

仪表板提供系统运营概览和快捷入口。

### 3.1 关键指标卡片

页面顶部展示 4 个关键指标卡片：

| 卡片 | 说明 |
|------|------|
| 👥 患者总数 | 系统中的患者总数 |
| 👨‍⚕️ 医生总数 | 注册的医生总数 |
| 📋 病历总数 | 所有病历记录数 |
| 📊 今日就诊 | 当天的就诊量 |

### 3.2 就诊趋势图

- 展示近期（默认近 7 天）的每日就诊量折线图
- 使用 ECharts 渲染，支持悬停查看具体数值

### 3.3 快捷操作

提供常用操作的快捷按钮：
- ➕ 新增患者
- ➕ 新增病历
- 📊 查看统计

---

## 4. 患者管理

患者管理模块提供完整的患者信息 CRUD 功能。

### 4.1 患者列表

**页面元素:**
- 搜索栏：按姓名、病历号、手机号搜索
- 新增按钮：打开新增患者表单
- 患者列表表格：显示所有患者信息
- 分页控件：支持翻页和每页条数设置

**列表字段:**
| 列 | 说明 |
|----|------|
| 病历号 | 系统自动生成 (格式: MR + 时间戳) |
| 姓名 | 患者姓名 |
| 性别 | 男/女 |
| 年龄 | 根据出生日期自动计算 |
| 手机号 | 联系电话 |
| 血型 | A/B/AB/O/未知 |
| 创建时间 | 记录创建时间 |
| 操作 | 查看 / 编辑 / 删除 |

### 4.2 新增患者

1. 点击列表上方的 **新增** 按钮
2. 在弹出的对话框中填写患者信息：
   - **姓名** *(必填)*
   - **性别** *(必填)* — 选择男/女
   - **出生日期** *(必填)* — 日期选择器
   - **手机号** *(必填)*
   - **身份证号** — 18 位，自动校验格式
   - **血型** — 下拉选择 A/B/AB/O/未知
   - **家庭住址**
   - **过敏史** — 多行文本
   - **紧急联系人** 和 **紧急联系电话**
3. 点击 **确认** 提交
4. 病历号将自动生成

### 4.3 编辑患者

1. 在患者列表中找到目标患者
2. 点击操作列的 **编辑** 按钮
3. 修改需要更新的信息
4. 点击 **确认** 保存

### 4.4 查看患者详情

1. 点击操作列的 **查看** 按钮或患者姓名链接
2. 查看患者的完整信息：
   - 基本信息（姓名、性别、年龄、联系方式等）
   - 就诊记录（该患者的所有病历）
   - 病史信息（过敏史等）

### 4.5 删除患者

1. 点击操作列的 **删除** 按钮
2. 在确认对话框中点击 **确认**
3. ⚠️ **注意**: 若患者存在关联的病历记录，则无法删除

---

## 5. 医生管理

### 5.1 医生列表

**搜索筛选:**
- 按姓名搜索
- 按科室筛选（下拉选择）

**列表字段:**
| 列 | 说明 |
|----|------|
| 姓名 | 医生姓名 (来自用户表 realName) |
| 科室 | 所属科室名称 |
| 职称 | 主任医师/副主任医师/主治医师等 |
| 专业特长 | 擅长领域 |
| 执业证号 | 医师执业证书编号 |
| 联系电话 | 工作联系电话 |
| 操作 | 查看 / 编辑 / 删除 |

### 5.2 新增医生

1. 点击 **新增** 按钮（仅管理员可见）
2. 填写信息：
   - **关联用户** *(必填)* — 选择已有的 doctor 角色用户
   - **所属科室** *(必填)* — 下拉选择科室
   - **职称** — 如主任医师、副主任医师
   - **专业特长**
   - **执业证号** — 唯一
   - **联系电话**
   - **个人简介**
3. 点击 **确认** 提交

### 5.3 编辑/删除

- **编辑**: 仅管理员可操作，修改医生信息
- **删除**: 仅管理员可操作，若有关联病历则无法删除
- 其他角色只能查看医生信息

---

## 6. 病历管理

病历管理是系统的核心模块，支持完整的病历生命周期管理。

### 6.1 病历列表

**搜索筛选:**
- 按患者姓名搜索
- 按就诊类型筛选（门诊/急诊/住院）
- 按状态筛选（草稿/已确认/已归档）
- 按日期范围筛选

**列表字段:**
| 列 | 说明 |
|----|------|
| 病历编号 | 自动生成的 ID |
| 患者姓名 | 关联的患者 |
| 接诊医生 | 关联的医生 |
| 就诊日期 | 就诊时间 |
| 就诊类型 | 门诊/急诊/住院 |
| 诊断 | 主要诊断 |
| 状态 | 草稿(黄)/已确认(绿)/已归档(灰) |
| 操作 | 查看/编辑/状态变更/删除 |

### 6.2 新增病历

1. 点击 **新增** 按钮
2. 填写病历信息：
   - **患者** *(必填)* — 搜索选择已有患者
   - **接诊医生** *(必填)* — 下拉选择医生
   - **就诊日期** *(必填)* — 日期时间选择器
   - **就诊类型** *(必填)* — 门诊/急诊/住院
   - **主诉** *(必填)* — 患者主要症状描述
   - **现病史** — 当前疾病的详细描述
   - **既往史** — 既往疾病和手术历史
   - **诊断** *(必填)* — 医生诊断结果
   - **治疗方案** — 治疗计划
   - **备注** — 其他需要记录的信息
3. 新创建的病历默认状态为 **草稿 (draft)**

### 6.3 病历状态工作流

病历有三种状态，按以下流程流转：

```
draft（草稿）────→ confirmed（已确认）────→ archived（已归档）
   可编辑              不可编辑                不可编辑
   可删除              不可删除                不可删除
```

**状态变更操作:**
1. 在病历列表中找到目标病历
2. 点击 **确认** 按钮：draft → confirmed
3. 点击 **归档** 按钮：confirmed → archived

> ⚠️ 已确认/已归档的病历**不可编辑或删除**，请在确认前仔细核对信息。

### 6.4 处方管理

每条病历可包含多个处方药品：

**查看处方:**
1. 在病历详情或编辑页面查看处方列表

**添加处方:**
1. 在病历编辑页面的处方区域点击 **添加药品**
2. 填写药品信息：
   - **药品名称** *(必填)* — 如"阿莫西林胶囊"
   - **剂量** *(必填)* — 如"500mg"
   - **用药频次** *(必填)* — 如"每日3次"
   - **疗程** — 如"7天"
   - **数量** — 如"21"
   - **用药说明** — 如"饭后服用"
3. 可添加多个药品
4. 点击 **保存** 批量提交

**删除处方:**
- 点击药品行的删除按钮移除单个药品
- 仅草稿状态的病历可修改处方

### 6.5 附件管理

每条病历可上传多个附件（检验报告、影像资料等）。

**上传附件:**
1. 在病历详情页的附件区域点击 **上传**
2. 选择文件（支持 PDF、JPG、PNG，最大 10MB）
3. 可添加附件描述
4. 文件将自动上传

**下载附件:**
- 点击附件列表中的 **下载** 按钮

**删除附件:**
- 点击附件列表中的 **删除** 按钮

---

## 7. 科室管理

科室管理用于维护医院的组织架构。

### 7.1 科室列表

**列表字段:**
| 列 | 说明 |
|----|------|
| 科室名称 | 如"内科"、"外科" |
| 科室代码 | 唯一标识码，如"NEI"、"WAI" |
| 描述 | 科室的职能说明 |
| 状态 | 启用(绿)/停用(红) |
| 排序 | 显示顺序 |
| 医生数量 | 该科室下的医生人数 |
| 操作 | 编辑 / 启用或停用 / 删除 |

### 7.2 新增科室

1. 点击 **新增** 按钮（仅管理员）
2. 填写信息：
   - **科室名称** *(必填)* — 不可重复
   - **科室代码** *(必填)* — 不可重复，建议使用拼音缩写
   - **描述** — 科室职能和服务内容
   - **排序顺序** — 数字越小越靠前
   - **是否启用** — 默认启用
3. 点击 **确认** 保存

### 7.3 启用/停用科室

1. 点击操作列的 **停用** 或 **启用** 按钮
2. 确认操作
3. ⚠️ 停用的科室将不会出现在医生管理的科室选择列表中

### 7.4 删除科室

- 仅管理员可操作
- ⚠️ 若科室下有关联的医生，则无法删除

---

## 8. 统计分析

统计分析模块提供 7 个维度的数据统计和可视化图表。

### 8.1 统计页面布局

统计页面使用 **Tab 标签页** 组织各维度：

```
[就诊统计] [就诊趋势] [科室统计] [医生统计] [患者统计] [疾病统计] [处方统计]
```

### 8.2 各统计维度

#### 就诊统计
- **指标**: 总就诊量、门诊量、急诊量、住院量
- **筛选**: 日期范围
- **展示**: 数据卡片 + 就诊类型饼图

#### 就诊趋势
- **指标**: 每日/每周/每月就诊量变化
- **筛选**: 日期范围、统计粒度
- **展示**: 折线图/面积图

#### 科室统计
- **指标**: 各科室的就诊量、医生数量
- **展示**: 柱状图 + 排名表格

#### 医生统计
- **指标**: 各医生的接诊量排名
- **展示**: 水平柱状图 + 数据表格

#### 患者统计
- **指标**: 新增患者趋势、年龄分布、性别比例
- **展示**: 折线图 + 饼图

#### 疾病统计
- **指标**: 各类疾病的就诊量排名
- **展示**: 柱状图 + 词云/表格

#### 处方统计
- **指标**: 药品使用频率排名、用量统计
- **展示**: 柱状图 + 数据表格

### 8.3 导出报告

1. 在任意统计页面点击 **生成报告** 按钮
2. 选择日期范围
3. 系统将生成 **CSV 格式** 的统计报告
4. 报告自动下载到本地
5. CSV 文件支持 Excel/WPS 直接打开（UTF-8 BOM 编码）

---

## 9. 系统管理

> ⚠️ **系统管理仅对管理员 (admin) 角色可见**

系统管理模块包含两个子功能：用户管理和操作日志。

### 9.1 用户管理

**页面功能:**

#### 用户列表
| 列 | 说明 |
|----|------|
| 用户名 | 登录账号 |
| 真实姓名 | 用户姓名 |
| 角色 | admin/doctor/nurse/receptionist |
| 邮箱 | 联系邮箱 |
| 手机号 | 联系电话 |
| 所属科室 | 关联的科室 |
| 状态 | 活跃(绿)/停用(黄)/锁定(红) |
| 操作 | 编辑/状态切换/重置密码/删除 |

#### 新增用户
1. 点击 **新增用户** 按钮
2. 填写信息：
   - **用户名** *(必填)* — 唯一
   - **密码** *(必填)* — 至少 6 位
   - **真实姓名** *(必填)*
   - **角色** *(必填)* — 选择 admin/doctor/nurse/receptionist
   - **邮箱** — 格式自动验证
   - **手机号**
   - **所属科室** — 下拉选择
3. 点击 **确认** 创建

#### 状态管理
- **启用/停用**: 切换用户的激活状态
- **锁定/解锁**: 锁定后用户无法登录
- 切换操作通过操作列的状态按钮完成

#### 重置密码
1. 点击操作列的 **重置密码** 按钮
2. 系统将密码重置为默认密码
3. 告知用户新密码，建议首次登录后修改

### 9.2 操作日志

操作日志记录系统中所有关键操作，用于审计追踪。

**查询筛选:**
- 按模块筛选（患者/医生/病历/科室/系统等）
- 按操作类型筛选（创建/更新/删除等）
- 按时间范围筛选
- 按操作人筛选

**日志字段:**
| 列 | 说明 |
|----|------|
| 操作时间 | 精确到秒 |
| 操作人 | 用户名 + 真实姓名 |
| 模块 | 操作的功能模块 |
| 操作类型 | CREATE/UPDATE/DELETE/LOGIN 等 |
| 操作目标 | 操作的对象描述 |
| 详情 | 操作的详细内容 (JSON) |
| IP 地址 | 客户端 IP |

---

## 10. 通用操作

### 10.1 表格操作

所有列表页面共享以下通用操作：

| 操作 | 说明 |
|------|------|
| **搜索** | 输入关键字后按 Enter 或点击搜索按钮 |
| **重置** | 清空所有搜索条件并刷新列表 |
| **分页** | 底部分页控件，支持翻页和每页条数 (10/20/50) |
| **排序** | 点击表头可按该列排序 |
| **刷新** | 点击刷新按钮重新加载数据 |

### 10.2 表单操作

| 操作 | 说明 |
|------|------|
| **必填项** | 标签前有红色 * 标记 |
| **验证** | 提交时自动验证，不通过的字段会显示红色提示 |
| **取消** | 关闭对话框，不保存任何更改 |
| **确认** | 提交表单数据 |

### 10.3 删除操作

- 所有删除操作都有**二次确认**对话框
- 有关联数据的记录无法删除（如有病历的患者）
- 删除操作不可恢复，请谨慎操作

### 10.4 修改密码

1. 点击右上角用户菜单
2. 选择 **修改密码**
3. 输入**旧密码**和**新密码**（新密码至少 6 位）
4. 确认修改
5. 修改成功后需要重新登录

### 10.5 快捷键

| 快捷键 | 说明 |
|--------|------|
| `Enter` | 搜索框中按下执行搜索 |
| `Esc` | 关闭当前对话框 |

---

*📖 返回 [项目 README](../README.md) | 查看 [架构设计](ARCHITECTURE.md) | 查看 [角色权限](ROLE_MANAGEMENT.md)*
